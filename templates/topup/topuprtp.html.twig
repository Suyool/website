{% extends 'base.html.twig' %}
{% block body %}

	{% if status is not defined %}
		{% if app.request.server.get('APP_ENV') == "dev" %}
			<script src="https://test-bobsal.gateway.mastercard.com/static/checkout/checkout.min.js" data-error="errorCallback" data-cancel="cancelCallback"></script>
		{% else %}
			<script src="https://bobsal.gateway.mastercard.com/static/checkout/checkout.min.js" data-error="errorCallback" data-cancel="cancelCallback"></script>
		{% endif %}
		<script type="text/javascript">
			sessionStorage.removeItem("HostedCheckout_sessionId");
function errorCallback(error) {
console.log(JSON.stringify(error));
}
function cancelCallback() {
console.log('Payment cancelled');
}

Checkout.configure({
session: {
id: "{{ session }}"
}
});
		</script>
		<div class="rtptopup">
		<div class="loaderTopUp">
			<div class="desktopMode desktop-logo">
			</div>
			<div class="mobileMode mobile-logo">
					<img src="{{asset('build/images/payment/mobiletop.svg')}}" alt="" width="100%">
				</div>
			<div class="">
				{% if topup is  defined and topup == "true" %}
					<div class="mobheader">
						<div class="back">
							<img src="{{ asset('/build/images/Loto/Back.png') }}" alt="">
						</div>
						<div class="topup">Top Up</div>
						<div></div>
					</div>
				{% endif %}
				
					<div id="embed-target" style="display:none;overflow: auto; -webkit-overflow-scrolling: touch; border: none;" scrolling="yes">
						<div class="whopay">
						<div class="paying">You are paying
							{{app.session.get('SenderInitials')}}</div>
						<div class="row">
							<div class="col-md-5 col-8">
								<div class="fee">Amount</div>
								<div class="fee">Card Processing Fees</div>
							</div>
							<div class="col-md-7 col-4">
								<div class="beforefee">{{app.session.get('amountwcurrency')}}</div>
								<div class="beforefee">{{app.session.get('currencyInAbb')}} {{fees|number_format(2, '.', ',')}}</div>
							</div>
						</div>
						<div style="border-top: 1px solid;margin-top: 15px;"></div>
						</div>
					</div>
				
				<span class="loaderTopUp2">
					<img src="{{ asset('/build/images/loaderSuyool3.gif') }}" alt="">
					<div class="paymentsend">Payment Link sent by
						{{sender}}</div>
					<div class="ensurethat">Ensure that
						{{sender}}
						is the
						<br>
						one requesting money from you.</div>
					<div id="submitTopUp">
						<button onclick="Checkout.showEmbeddedPage('#embed-target');" class="continueBtn">Continue</button>
					</div>
				</span>
				<div class="mobileMode help">Need help?<a href="tel:+96181484000">&nbsp;Contact us</a>
				</div>
			</div>
			</div>

		{% else %}

			<div class="entireBody">
				<div class="desktopMode desktop-logo">
					<img src="{{asset('build/images/payment/nonsuyooler-flow-suyool-cover-desktop.svg')}}" alt="" class="topiveri" width="100%">
				</div>
				<div class="popup">
					<div class="image">
						<img src="{{ asset(imgsrc) }}" alt="">
					</div>
					<div class="title">
						{{title}}
					</div>
					<div class="desc">
						{{description|raw}}
					</div>
					<div class="button">
						<button class="action">
							{% if redirect is defined and redirect is not null %}
								<a href="{{app.request.schemeAndHttpHost}}/{{redirect}}">{{button}}</a>
							{% else %}
								{{button}}
							{% endif %}
						</button>
					</div>
				</div>
			</div>
		{% endif %}
	{% endblock %}
