{% extends 'base.html.twig' %}
{% block body %}
	{% if status is not defined %}
		<div class="loaderTopUp">
		<img src="{{ asset('/build/images/loaderSuyool3.gif') }}" alt="">
		{% if app.request.server.get('APP_ENV') == "dev" %}
			<script src="https://test-bobsal.gateway.mastercard.com/static/checkout/checkout.min.js" data-error="errorCallback" data-cancel="cancelCallback"></script>
		{% else %}
			<script src="https://bobsal.gateway.mastercard.com/static/checkout/checkout.min.js" data-error="errorCallback" data-cancel="cancelCallback"></script>
		{% endif %}
		<script type="text/javascript">
		sessionStorage.removeItem("HostedCheckout_sessionId");
			function errorCallback(error) {
console.log(JSON.stringify(error));
if (navigator.userAgent.match(/Android/i)) {
	window.AndroidInterface.callbackHandler("GoToApp");
  } else {
	window.webkit.messageHandlers.callbackHandler.postMessage("GoToApp");
  }
}
function cancelCallback() {
console.log('Payment cancelled');
if (navigator.userAgent.match(/Android/i)) {
	window.AndroidInterface.callbackHandler("GoToApp");
  } else {
	window.webkit.messageHandlers.callbackHandler.postMessage("GoToApp");
  }
}

Checkout.configure({
session: {
id: "{{ session }}"
}
});
		</script>
			<button onclick="Checkout.showPaymentPage();" class="continueBtn" style="display: none;">Continue</button>
		<script type="text/javascript">
		window.onload = function(){
			var button = document.querySelector('.continueBtn');
				button.click();
		};
		setInterval(function () {
			if (navigator.userAgent.match(/Android/i)) {
                window.AndroidInterface.callbackHandler("GoToApp");
              } else {
                window.webkit.messageHandlers.callbackHandler.postMessage("GoToApp");
              }
		}, 5000);
		</script>
		</div>
	{% else %}
		<div class="entireBody">
			<div class="desktopMode desktop-logo">
				<img src="{{asset('build/images/payment/nonsuyooler-flow-suyool-cover-desktop.svg')}}" alt="" class="topiveri" width="100%">
			</div>
			<div class="popup">
				<div class="image">
					<img src="{{ asset(imgsrc) }}" alt="">
				</div>
				<div class="title">
					{{title}}
				</div>
				<div class="desc">
					{{description|raw}}
				</div>
				<div class="button">
					<button class="action {% if infoSuccess is defined and infoSuccess == true %}actionAppSuccess{% elseif infoFailed is defined and infoFailed == true %}actionAppFailed{% else %}actionBrowser{% endif %}">
						{{button}}
					</button>
				</div>
			</div>
		</div>
	{% endif %}
{% endblock %}
